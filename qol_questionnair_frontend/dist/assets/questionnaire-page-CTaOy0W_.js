import{j as e,u as g,a as f,g as j,s as w,b as _,r as u}from"./index-KLd7WsfE.js";const c={title:"Are you okay?",intro:"Answer 10 questions honestly.",questions:[{id:"Q1",parameter:"overall_life_satisfaction",text:"Reflecting on your achievements and path, how do you feel about where you are in life right now?",options_ref:"qol_options"},{id:"Q2",parameter:"positive_emotions",text:"How often do you experience joy, peace, or moments of true happiness in your day-to-day life?",options_ref:"qol_options"},{id:"Q3",parameter:"social_connections",text:"How connected and supported do you feel by people in your life (friends, family, partner, colleagues)?",options_ref:"qol_options"},{id:"Q4",parameter:"gratitude",text:"When good things happen, how often do you notice and feel grateful?",options_ref:"qol_options"},{id:"Q5",parameter:"purpose_meaning",text:"Do your daily activities and overall life feel purposeful?",options_ref:"qol_options"},{id:"Q6",parameter:"autonomy_freedom",text:"How much freedom and control do you feel you have in choosing your own path?",options_ref:"qol_options"},{id:"Q7",parameter:"resilience",text:"When life throws challenges your way, how do you handle them?",options_ref:"qol_options"},{id:"Q8",parameter:"self_compassion",text:"After a personal setback (mistake, failure, disappointment), how do you treat yourself?",options_ref:"qol_options"},{id:"Q9",parameter:"balance_engagement",text:"How balanced and engaging does your daily routine feel?",options_ref:"qol_options"},{id:"Q10",parameter:"physical_wellbeing",text:"How does your physical health affect your mood, energy, and happiness?",options_ref:"qol_options"}]},q=({question:o,onInputChange:n,selectedAnswer:t,onEnterPress:a})=>{const r=i=>{i.key==="Enter"&&t&&t.trim()!==""&&a()};return e.jsxs("div",{className:"question-container",children:[e.jsx("h3",{children:o.text}),e.jsx("div",{className:"input-container",children:e.jsx("input",{type:"text",value:t||"",onChange:i=>n(o.id,i.target.value),onKeyPress:r,placeholder:"Type your answer here...",className:"text-input"})})]})},v=()=>{const o=g(),{currentQuestionIndex:n,answers:t}=f(l=>l.questionnaire),a=(l,p)=>{o(w({questionId:l,value:p}))},r=()=>{o(j(c.questions.length))},i=()=>{o(_())},s=c.questions[n];return e.jsxs("div",{className:"questionnaire-container",children:[e.jsx("h1",{children:c.title}),e.jsx("p",{children:c.intro}),e.jsx(q,{question:s,onInputChange:a,selectedAnswer:t[s.id],onEnterPress:r}),e.jsxs("div",{className:"navigation-buttons",children:[e.jsx("button",{onClick:i,disabled:n===0,children:"Previous"}),e.jsx("button",{onClick:r,disabled:!t[s.id]||t[s.id].trim()==="",children:n===c.questions.length-1?"Submit":"Next"})]})]})},Q=({gptAnalysis:o})=>o?e.jsxs("div",{className:"result-container",children:[e.jsx("h2",{children:"Your Analysis"}),e.jsxs("div",{className:"gpt-analysis",children:[e.jsx("h3",{children:"Key Insights:"}),e.jsx("p",{children:o.keyInsights}),e.jsx("h3",{children:"Your Strengths:"}),e.jsx("p",{children:o.yourStrengths}),e.jsx("h3",{children:"Opportunities for Reflection/Growth:"}),e.jsx("ul",{children:o.opportunitiesForReflection&&o.opportunitiesForReflection.map((n,t)=>e.jsx("li",{children:n},t))}),e.jsx("h3",{children:"Personalized Guidance:"}),e.jsx("p",{children:o.personalizedGuidance})]})]}):null,N=()=>{const{answers:o,showResults:n}=f(h=>h.questionnaire),[t,a]=u.useState(""),[r,i]=u.useState(!1),[s,l]=u.useState(null),[p,y]=u.useState(null);return u.useEffect(()=>{y("https://qol-questionnaire.onrender.com/"),n&&!r&&!s&&t===""&&(async()=>{i(!0),l(null),a("");try{const d=await fetch(p+"analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({answers:o})});if(!d.ok){const m=await d.text();throw new Error(m||"Failed to get analysis")}const x=await d.json();a(x)}catch(d){console.error("Error sending answers to backend:",d),l(d.message)}finally{i(!1)}})()},[n,r,s,o,t]),n?r?e.jsx("div",{className:"loading-message",children:"Getting your personalized feedback..."}):s?e.jsxs("div",{className:"error-message",children:["Error: ",s]}):e.jsx(Q,{gptAnalysis:t}):e.jsx(v,{})};export{N as default};
